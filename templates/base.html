<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ title or "GEICACONTROLRIFAS" }}</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/estilos.css', v=7) }}">

  <style>
    /* ===== Fondo y tipografía ===== */
    body{
      min-height:100vh;
      color:#e5e7eb;
      /* Tono más suave de fondo con brillos laterales */
      background:
        radial-gradient(1100px 560px at 20% -10%, rgba(232,240,255,.25) 0, transparent 60%),
        radial-gradient(900px 540px at 110% 10%, rgba(255,232,242,.18) 0, transparent 50%),
        linear-gradient(180deg,#0c1428 0,#0a1124 100%);
    }

    .brand { letter-spacing:.5px; font-weight:700 }

    /* ===== Tarjetas efecto vidrio ===== */
    .glass{
      background: rgba(10, 17, 34, .88);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 18px;
      box-shadow: 0 12px 36px rgba(0,0,0,.45);
      color: #e9eefb;
    }

    .text-secondary{ color: #a9b5d9 !important; }

    .btn-primary{ border-radius:12px; padding:.65rem 1.1rem }

    /* FAB de soporte */
    .support-fab{
      position: fixed; right: 18px; bottom: 18px; z-index: 999;
      border-radius: 999px; padding:.8rem 1rem; font-weight:600;
    }

    a, a:hover { text-decoration:none }
  </style>
</head>
<body>
  <nav class="navbar navbar-dark">
    <div class="container py-2">
      <span class="navbar-brand brand">GEICA<span class="text-info">CONTROL</span>RIFAS</span>
    </div>
  </nav>

  <!-- Flashes Bootstrap (mantiene tu lógica existente) -->
  <div class="container mt-3" style="max-width:640px;">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for cat, msg in messages %}
          <div class="alert alert-{{ 'danger' if cat=='error' else cat }} alert-dismissible fade show" role="alert">
            {{ msg }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}
  </div>

  {% block content %}{% endblock %}

  <!-- Botón de Soporte / Ayuda -->
  <a class="btn btn-info support-fab"
     href="{{ soporte_url or 'https://wa.me/573105494296?text=Necesito%20ayuda%20con%20mi%20rifa' }}"
     target="_blank" rel="noopener">🛟 Soporte</a>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Auto-cierre suave de los flashes (4s) -->
  <script>
    (function(){
      var alerts = document.querySelectorAll('.alert');
      if(!alerts.length) return;
      alerts.forEach(function(el){
        // cierra manualmente a los 4 segundos si no se cerró antes
        setTimeout(function(){
          try{
            var instance = bootstrap.Alert.getOrCreateInstance(el);
            instance.close();
          }catch(_){}
        }, 4000);
      });
    })();
  </script>
</body>
</html>
